# 📝 Cloudflare Pages 배포 명령어 입력 가이드

> "프로덕션 이외 분기 배포 명령" 입력 방법

---

## 🎯 배포 명령어 입력 화면

Cloudflare Pages 설정 시 다음 항목들이 보입니다:

```
┌──────────────────────────────────────────────────┐
│  빌드 명령 (Build command)                        │
│  [npm run build                              ]   │
│                                                  │
│  빌드 출력 디렉토리 (Build output directory)      │
│  [.next                                      ]   │
│                                                  │
│  프로덕션 이외 분기 배포 명령 (선택 사항)          │
│  Non-production branch deploy command            │
│  [                                           ]   │
└──────────────────────────────────────────────────┘
```

---

## ✅ 입력할 내용

### 1️⃣ 빌드 명령 (Build command) - **필수**
```
npm run build
```
> 이것은 메인 빌드 명령어입니다.

---

### 2️⃣ 프로덕션 이외 분기 배포 명령 - **선택 사항**

**입력하는 경우:**
```
npm run build
```

**또는 비워두기:**
```
(비워둠)
```

---

## 🤔 언제 입력해야 할까요?

### 👉 비워두셔도 됩니다! (권장)

**이유:**
- 대부분의 경우 빌드 명령이 같습니다
- 비워두면 자동으로 위의 "빌드 명령"을 사용합니다
- Next.js는 보통 모든 브랜치에서 같은 방식으로 빌드됩니다

### 👉 입력해야 하는 경우

다음과 같은 경우에만 입력:
- 개발 브랜치에서 다른 빌드 명령을 사용하고 싶을 때
- 프리뷰 배포 시 다른 설정을 사용하고 싶을 때

**예시:**
```bash
# 프로덕션
npm run build

# 개발/프리뷰 브랜치
npm run build:preview
```

---

## 📋 현재 프로젝트 권장 설정

### ✅ 권장: 비워두기

```
┌──────────────────────────────────────────────────┐
│  빌드 명령                                        │
│  [npm run build                              ]   │
│                                                  │
│  빌드 출력 디렉토리                               │
│  [.next                                      ]   │
│                                                  │
│  프로덕션 이외 분기 배포 명령                      │
│  [                                           ]   │
│  ↑ 비워두세요!                                   │
└──────────────────────────────────────────────────┘
```

**이유:**
1. Next.js는 모든 브랜치에서 같은 방식으로 빌드
2. 환경 변수로 프로덕션/개발 구분 가능
3. 설정이 더 간단함

---

## 🔧 배포 명령 vs wrangler 명령

### 혼동하기 쉬운 부분!

**Cloudflare Pages GUI에서:**
```
빌드 명령: npm run build
프로덕션 이외 분기 배포 명령: (비워둠)
```

**package.json의 wrangler 명령어 (로컬 CLI용):**
```json
{
  "scripts": {
    "pages:deploy": "npx wrangler pages deploy .next"
  }
}
```

> GUI에서는 **wrangler 명령어를 입력하지 않습니다!**
> wrangler는 로컬 컴퓨터에서 CLI로 배포할 때만 사용합니다.

---

## 📊 브랜치별 배포 동작

### Main 브랜치 (프로덕션)
```
브랜치: main
명령어: npm run build (위에 입력한 것 사용)
URL: https://superplace-study.pages.dev
```

### 다른 브랜치 (프리뷰)
```
브랜치: dev, feature/*, 등
명령어: npm run build (같은 명령어 사용)
URL: https://abc123.superplace-study.pages.dev
```

---

## 🎯 완성된 설정 예시

```
┌──────────────────────────────────────────────────────────┐
│  프로젝트 설정                                            │
├──────────────────────────────────────────────────────────┤
│  프로젝트 이름                                            │
│  [superplace_study                                   ]   │
│                                                          │
│  프로덕션 브랜치                                          │
│  [main                                               ▼]  │
│                                                          │
│  프레임워크 프리셋                                        │
│  [Next.js                                            ▼]  │
│                                                          │
│  빌드 명령                                               │
│  [npm run build                                      ]   │
│                                                          │
│  빌드 출력 디렉토리                                       │
│  [.next                                              ]   │
│                                                          │
│  루트 디렉토리 (선택 사항)                                │
│  [/                                                  ]   │
│                                                          │
│  프로덕션 이외 분기 배포 명령 (선택 사항)                  │
│  [                                                   ]   │
│  ↑ 이 항목은 비워두세요!                                 │
│                                                          │
│              [Cancel]  [Save and Deploy]                 │
└──────────────────────────────────────────────────────────┘
```

---

## ✅ 입력 체크리스트

- [x] 프로젝트 이름: `superplace_study`
- [x] 프로덕션 브랜치: `main`
- [x] 프레임워크: `Next.js`
- [x] 빌드 명령: `npm run build`
- [x] 출력 디렉토리: `.next`
- [x] 루트 디렉토리: `/` (또는 비움)
- [x] **프로덕션 이외 분기 배포 명령: (비워둠)** ✨

---

## 🔄 GitHub 자동 배포 동작

### Main 브랜치에 Push
```bash
git push origin main
```
→ 프로덕션 배포 (https://superplace-study.pages.dev)

### 다른 브랜치에 Push
```bash
git push origin dev
git push origin feature/new-feature
```
→ 프리뷰 배포 (https://[commit-hash].superplace-study.pages.dev)

**모든 브랜치가 같은 빌드 명령 사용!**

---

## 🆘 FAQ

### Q1: "프로덕션 이외 분기 배포 명령"을 꼭 입력해야 하나요?
**A:** 아니요! 비워두시면 됩니다. 자동으로 위의 빌드 명령을 사용합니다.

### Q2: 입력란이 비어있으면 에러가 나나요?
**A:** 아니요! "선택 사항"이므로 비워두는 것이 정상입니다.

### Q3: 나중에 추가할 수 있나요?
**A:** 네! Settings > Builds & deployments에서 언제든 변경 가능합니다.

### Q4: wrangler 명령어를 여기에 입력하나요?
**A:** 아니요! wrangler는 로컬 CLI 배포용입니다. GUI에서는 npm 명령어만 사용합니다.

---

## 💡 정리

### 입력할 것:
```
빌드 명령: npm run build
출력 디렉토리: .next
```

### 비워둘 것:
```
프로덕션 이외 분기 배포 명령: (비워둠)
```

---

## 🎯 다음 단계

입력 완료 후:
1. **"Save and Deploy"** 버튼 클릭
2. 빌드 진행 확인 (2-5분)
3. 배포 완료 대기
4. 환경 변수 설정으로 이동

---

**이 항목은 비워두시면 됩니다! 걱정 마세요!** 😊

간단하게 다른 입력란만 채우고 배포하시면 됩니다!
