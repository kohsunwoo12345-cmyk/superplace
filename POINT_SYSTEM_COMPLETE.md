# π“± SMS/μΉ΄μΉ΄μ¤ ν¬μΈνΈ μ‹μ¤ν… κµ¬ν„ μ™„λ£

## β… μ™„λ£λ κΈ°λ¥

### 1. ν¬μΈνΈ μ¶©μ „ μ‹μ¤ν…
- β… ν•™μ›μ¥μ© ν¬μΈνΈ μ¶©μ „ μ‹ μ²­ νμ΄μ§€
- β… κ΄€λ¦¬μμ© ν¬μΈνΈ μ¶©μ „ μΉμΈ νμ΄μ§€
- β… λ¶€κ°€μ„Έ(VAT) 10% μλ™ κ³„μ‚°
- β… μ…κΈ μ¦λΉ™ νμΌ μ—…λ΅λ“ κΈ°λ¥

### 2. κ¶ν• κ΄€λ¦¬
- β… SMS λ“±λ΅ μΉμΈ νμ΄μ§€: κ΄€λ¦¬μλ§ μ ‘κ·Ό κ°€λ¥ (ν•™μ›μ¥ μ°¨λ‹¨)
- β… ν¬μΈνΈ μ¶©μ „ μΉμΈ νμ΄μ§€: κ΄€λ¦¬μ μ „μ©

### 3. λ°μ΄ν„°λ² μ΄μ¤
- β… PointChargeRequest ν…μ΄λΈ” (ν¬μΈνΈ μ¶©μ „ μ‹ μ²­)
- β… MessageHistory ν…μ΄λΈ” (λ¬Έμ λ°μ†΅ λ‚΄μ—­)
- β… SmsRegistrationRequest ν…μ΄λΈ” (SMS μ‚¬μ—…μ λ“±λ΅)

### 4. μ‚¬μ΄λ“λ°” λ©”λ‰΄
- β… κ΄€λ¦¬μ: "ν¬μΈνΈ μ¶©μ „ μΉμΈ" λ©”λ‰΄ μ¶”κ°€
- β… ν•™μ›μ¥: "ν¬μΈνΈ μ¶©μ „" λ©”λ‰΄ μ¶”κ°€

## π“‚ μƒμ„±λ νμΌ

### νμ΄μ§€
1. `/src/app/dashboard/admin/point-approvals/page.tsx` - κ΄€λ¦¬μμ© ν¬μΈνΈ μΉμΈ
2. `/src/app/dashboard/point-charge/page.tsx` - ν•™μ›μ¥μ© ν¬μΈνΈ μ¶©μ „

### API
1. `/functions/api/admin/point-charge-requests.ts` - μ¶©μ „ μ‹ μ²­ λ©λ΅ μ΅°ν
2. `/functions/api/admin/point-charge-requests/approve.ts` - μ¶©μ „ μΉμΈ
3. `/functions/api/admin/point-charge-requests/reject.ts` - μ¶©μ „ κ±°μ 
4. `/functions/api/point-charge-requests/create.ts` - μ¶©μ „ μ‹ μ²­ μƒμ„±

### μ¤ν‚¤λ§
1. `/schema_message_system.sql` - ν¬μΈνΈ λ° λ©”μ‹μ§€ μ‹μ¤ν… ν…μ΄λΈ”

## π”§ ν•µμ‹¬ κΈ°λ¥

### ν¬μΈνΈ κ°€κ²© μ •μ±…
```
1 ν¬μΈνΈ = 10μ› + VAT 10%
μμ‹:
- 1,000 ν¬μΈνΈ = 10,000μ› + 1,000μ›(VAT) = 11,000μ›
- 5,000 ν¬μΈνΈ = 50,000μ› + 5,000μ›(VAT) = 55,000μ›
- 10,000 ν¬μΈνΈ = 100,000μ› + 10,000μ›(VAT) = 110,000μ›
```

### λ©”μ‹μ§€ λ°μ†΅ λΉ„μ© (μμ •)
```
- SMS: 20 ν¬μΈνΈ/κ±΄
- μΉ΄μΉ΄μ¤ν†΅: 15 ν¬μΈνΈ/κ±΄
```

## π“ νμ΄μ§€ μ ‘κ·Ό

### κ΄€λ¦¬μ
```
https://superplacestudy.pages.dev/dashboard/admin/point-approvals
```
- ν¬μΈνΈ μ¶©μ „ μ‹ μ²­ λ©λ΅ ν™•μΈ
- μΉμΈ/κ±°μ  μ²λ¦¬
- μ…κΈ μ¦λΉ™ νμΌ λ‹¤μ΄λ΅λ“

### ν•™μ›μ¥
```
https://superplacestudy.pages.dev/dashboard/point-charge
```
- ν¬μΈνΈ μ¶©μ „ μ‹ μ²­
- μ…κΈ μ •λ³΄ μ…λ ¥
- μ¦λΉ™ νμΌ μ—…λ΅λ“
- μ‹ μ²­ λ‚΄μ—­ ν™•μΈ

## π« μ ‘κ·Ό μ°¨λ‹¨
```
https://superplacestudy.pages.dev/dashboard/admin/sms/registration-approval
```
- ν•™μ›μ¥ μ ‘κ·Ό μ‹: "μ ‘κ·Ό κ¶ν• μ—†μ" λ©”μ‹μ§€ ν‘μ‹
- κ΄€λ¦¬μλ§ μ ‘κ·Ό κ°€λ¥

## π’Ύ λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§

### PointChargeRequest (ν¬μΈνΈ μ¶©μ „ μ‹ μ²­)
```sql
- id: TEXT PRIMARY KEY
- userId: TEXT (μ‹ μ²­μ ID)
- userName: TEXT (μ‹ μ²­μ μ΄λ¦„)
- userEmail: TEXT (μ‹ μ²­μ μ΄λ©”μΌ)
- requestedPoints: INTEGER (μ‹ μ²­ ν¬μΈνΈ)
- pointPrice: REAL (ν¬μΈνΈ κΈμ•΅)
- vat: REAL (λ¶€κ°€μ„Έ 10%)
- totalPrice: REAL (μ΄ κΈμ•΅)
- paymentMethod: TEXT (κ²°μ  λ°©λ²•)
- depositBank: TEXT (μ…κΈ μ€ν–‰)
- depositorName: TEXT (μ…κΈμλ…)
- attachmentUrl: TEXT (μ¦λΉ™ νμΌ URL)
- requestMessage: TEXT (μ‹ μ²­ λ©”μ‹μ§€)
- status: TEXT (PENDING, APPROVED, REJECTED)
- approvedBy: TEXT (μΉμΈμ)
- approvedAt: TEXT (μΉμΈ μ‹κ°)
- rejectionReason: TEXT (κ±°μ  μ‚¬μ )
```

### MessageHistory (λ©”μ‹μ§€ λ°μ†΅ λ‚΄μ—­)
```sql
- id: TEXT PRIMARY KEY
- userId: TEXT (λ°μ†΅μ ID)
- userName: TEXT (λ°μ†΅μ μ΄λ¦„)
- messageType: TEXT (SMS, KAKAO)
- recipientCount: INTEGER (μμ‹ μ μ)
- recipients: TEXT (μμ‹ μ λ©λ΅ JSON)
- messageContent: TEXT (λ©”μ‹μ§€ λ‚΄μ©)
- pointsUsed: INTEGER (μ‚¬μ©λ ν¬μΈνΈ)
- pointCostPerMessage: INTEGER (λ©”μ‹μ§€λ‹Ή λΉ„μ©)
- status: TEXT (SENT, FAILED, PENDING)
- sentAt: TEXT (λ°μ†΅ μ‹κ°)
```

## π― λ‹¤μ λ‹¨κ³„ (TODO)

### 5. λ¬Έμ/μΉ΄μΉ΄μ¤ λ°μ†΅ νμ΄μ§€ κ°μ„  π”„
- [ ] λ°μ†΅ νƒ€μ… μ„ νƒ (SMS/μΉ΄μΉ΄μ¤)
- [ ] ν¬μΈνΈ μ°¨κ° κΈ°λ¥ μ¶”κ°€
- [ ] λ°μ†΅ μ „ ν¬μΈνΈ μ”μ•΅ ν™•μΈ
- [ ] λ°μ†΅ λ‚΄μ—­ μ €μ¥

### 7. νμΌ λ‹¤μ΄λ΅λ“ API β³
- [ ] μ²¨λ¶€ νμΌ λ‹¤μ΄λ΅λ“ μ—”λ“ν¬μΈνΈ
- [ ] Blob μ €μ¥μ† μ—°λ™
- [ ] νμΌ μ ‘κ·Ό κ¶ν• μ²΄ν¬

## π“ μ‚¬μ© μ‹λ‚λ¦¬μ¤

### ν•™μ›μ¥μ ν¬μΈνΈ μ¶©μ „ νλ¦„
1. `/dashboard/point-charge` μ ‘μ†
2. μ¶©μ „ν•  ν¬μΈνΈ μ„ νƒ (1,000 ~ 100,000)
3. κ²°μ  μ •λ³΄ μ…λ ¥ (κ²°μ  λ°©λ²•, μ€ν–‰, μ…κΈμλ…)
4. μ…κΈ μ¦λΉ™ νμΌ μ—…λ΅λ“
5. μ‹ μ²­ λ©”μ‹μ§€ μ‘μ„± (μ„ νƒ)
6. "μ¶©μ „ μ‹ μ²­ν•κΈ°" λ²„νΌ ν΄λ¦­
7. κ΄€λ¦¬μ μΉμΈ λ€κΈ°

### κ΄€λ¦¬μμ μΉμΈ νλ¦„
1. `/dashboard/admin/point-approvals` μ ‘μ†
2. λ€κΈ° μ¤‘μΈ μ‹ μ²­ λ©λ΅ ν™•μΈ
3. μ‹ μ²­ μƒμ„Έ μ •λ³΄ ν™•μΈ
   - μ‹ μ²­μ μ •λ³΄
   - ν¬μΈνΈ λ° κΈμ•΅
   - μ…κΈ μ •λ³΄
   - μ¦λΉ™ νμΌ λ‹¤μ΄λ΅λ“
4. μΉμΈ λλ” κ±°μ  μ„ νƒ
   - μΉμΈ: μ¦‰μ‹ ν¬μΈνΈ μ§€κΈ‰
   - κ±°μ : κ±°μ  μ‚¬μ  μ…λ ¥
5. μ²λ¦¬ μ™„λ£

## π” λ³΄μ•

### κ¶ν• μ²΄ν¬
- localStorageμ `userRole` ν™•μΈ
- ADMIN, SUPER_ADMINλ§ κ΄€λ¦¬μ νμ΄μ§€ μ ‘κ·Ό
- DIRECTORλ” SMS λ“±λ΅ μΉμΈ νμ΄μ§€ μ°¨λ‹¨

### API λ³΄μ• (TODO)
- λ¨λ“  APIμ— μΈμ¦ ν† ν° ν™•μΈ μ¶”κ°€ ν•„μ”
- μ‚¬μ©μ κ¶ν•λ³„ μ ‘κ·Ό μ μ–΄
- SQL Injection λ°©μ–΄

## π“± λ°μ‘ν• λ””μμΈ
- λ¨λ°”μΌ, νƒλΈ”λ¦Ώ, λ°μ¤ν¬ν†± λ¨λ‘ μ§€μ›
- μΉ΄λ“ λ μ΄μ•„μ›ƒμΌλ΅ κΉ”λ”ν• UI
- μƒνƒλ³„ μƒ‰μƒ κµ¬λ¶„ (λ€κΈ°/μΉμΈ/κ±°μ )

## π¨ UI μ»΄ν¬λ„νΈ
- Shadcn UI μ‚¬μ©
- Badgeλ΅ μƒνƒ ν‘μ‹
- Cardλ΅ μ •λ³΄ κ·Έλ£Ήν™”
- ButtonμΌλ΅ μ•΅μ… μ²λ¦¬
- Dialogλ΅ λ¨λ‹¬ ν‘μ‹

## π€ λ°°ν¬ μ •λ³΄
- **μ»¤λ°‹**: `315b3bf`
- **λ‚ μ§**: 2026-02-21
- **μƒνƒ**: β… λ°°ν¬ μ™„λ£

## π“ μ£Όμ” λ³€κ²½ μ‚¬ν•­
1. ν¬μΈνΈ μ‹μ¤ν… μ™„μ „ κµ¬ν„
2. VAT 10% μλ™ κ³„μ‚°
3. ν•™μ›μ¥/κ΄€λ¦¬μ κ¶ν• λ¶„λ¦¬
4. SMS λ“±λ΅ μΉμΈ νμ΄μ§€ μ ‘κ·Ό μ μ–΄
5. μ‚¬μ΄λ“λ°” λ©”λ‰΄ μ—…λ°μ΄νΈ

---

**μ‘μ„±μ**: Claude AI Assistant  
**λ§μ§€λ§‰ μ—…λ°μ΄νΈ**: 2026-02-21  
**μƒνƒ**: β… κΈ°λ³Έ κΈ°λ¥ μ™„λ£, λ°μ†΅ κΈ°λ¥ κ°μ„  μμ •
