# ğŸ¯ **ë¬¸ì œ í•´ê²°: í…Œì´ë¸” ì´ë¦„ ë¶ˆì¼ì¹˜**

## ğŸ”´ ê·¼ë³¸ ì›ì¸ ë°œê²¬!

### ë¬¸ì œ
"ì„ íƒí•œ í•™ìƒì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." ì˜¤ë¥˜ì˜ ì‹¤ì œ ì›ì¸ì€ **í…Œì´ë¸” ì´ë¦„ ë¶ˆì¼ì¹˜**ì˜€ìŠµë‹ˆë‹¤.

### í…Œì´ë¸” ì´ë¦„ ë¶ˆì¼ì¹˜

| API | ì‚¬ìš©í•˜ëŠ” í…Œì´ë¸” ì´ë¦„ | ìƒíƒœ |
|-----|---------------------|------|
| `/api/admin/users` (í•™ìƒ ëª©ë¡ ì¡°íšŒ) | `User` (ëŒ€ë¬¸ì) | âœ… ì •ìƒ ë™ì‘ |
| `/api/admin/landing-pages` (ëœë”©í˜ì´ì§€ ìƒì„±) | `users` (ì†Œë¬¸ì) | âŒ í…Œì´ë¸” ì—†ìŒ |

### ì¦ê±°

#### users.js (í•™ìƒ ëª©ë¡ API)
```javascript
const user = await db
  .prepare('SELECT id, email, role, academyId FROM User WHERE email = ?')
  //                                              ^^^^ ëŒ€ë¬¸ì!
  .bind(tokenData.email)
  .first();
```

#### landing-pages.ts (ëœë”©í˜ì´ì§€ ìƒì„± API) - Before
```typescript
const userExists = await db
  .prepare(`SELECT id FROM users WHERE id = ?`)
  //                         ^^^^^ ì†Œë¬¸ì! âŒ í…Œì´ë¸” ì—†ìŒ
  .bind(userIdInt)
  .first();
```

## âœ… í•´ê²° ë°©ë²•

`users` â†’ `User`ë¡œ ë³€ê²½:

```typescript
const userExists = await db
  .prepare(`SELECT id FROM User WHERE id = ?`)
  //                         ^^^^ ëŒ€ë¬¸ìë¡œ ìˆ˜ì •!
  .bind(userIdInt)
  .first();
```

## ğŸ§ª ì™œ ì´ ë¬¸ì œê°€ ë°œìƒí–ˆëŠ”ê°€?

### 1. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ í™•ì¸
Cloudflare D1 Consoleì—ì„œ ì‹¤í–‰:
```sql
-- ì‹¤ì œ í…Œì´ë¸” ëª©ë¡ í™•ì¸
SELECT name FROM sqlite_master WHERE type='table';

-- ì˜ˆìƒ ê²°ê³¼:
-- User (ëŒ€ë¬¸ì) âœ…
-- Academy
-- Attendance
-- ...
-- users (ì†Œë¬¸ì) âŒ ì—†ìŒ!
```

### 2. í”„ë¡ íŠ¸ì—”ë“œëŠ” ì •ìƒ ì‘ë™
- `/api/admin/users?role=STUDENT` í˜¸ì¶œ
- `User` í…Œì´ë¸” ì¡°íšŒ (ëŒ€ë¬¸ì)
- í•™ìƒ ëª©ë¡ ì •ìƒ í‘œì‹œ âœ…

### 3. ëœë”©í˜ì´ì§€ ìƒì„±ë§Œ ì‹¤íŒ¨
- `/api/admin/landing-pages` POST í˜¸ì¶œ
- `users` í…Œì´ë¸” ì¡°íšŒ ì‹œë„ (ì†Œë¬¸ì)
- **í…Œì´ë¸”ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ** âŒ
- "ì„ íƒí•œ í•™ìƒì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." ì˜¤ë¥˜

## ğŸš€ ë°°í¬ ì •ë³´

- **Commit**: (ë‹¤ìŒ ì»¤ë°‹)
- **ë³€ê²½ íŒŒì¼**: `functions/api/admin/landing-pages.ts`
- **ë³€ê²½ ë‚´ìš©**: `users` â†’ `User`

## âœ… í…ŒìŠ¤íŠ¸ (ë°°í¬ í›„)

### ì˜ˆìƒ ê²°ê³¼:
1. âœ… í•™ìƒ ì„ íƒ â†’ ì •ìƒ
2. âœ… "ìƒì„±í•˜ê¸°" í´ë¦­ â†’ **ì„±ê³µ!**
3. âœ… ëœë”©í˜ì´ì§€ ìƒì„± ì™„ë£Œ

### ë§Œì•½ ì—¬ì „íˆ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´:
- Cloudflare D1 Consoleì—ì„œ í™•ì¸:
  ```sql
  -- ì‹¤ì œ í…Œì´ë¸” ì´ë¦„ í™•ì¸
  SELECT name FROM sqlite_master WHERE type='table' AND name LIKE '%ser%';
  ```

## ğŸ“Š ì •ë¦¬

| ì¦ìƒ | ì›ì¸ | í•´ê²° |
|------|------|------|
| "ì„ íƒí•œ í•™ìƒì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." | `users` í…Œì´ë¸” ì—†ìŒ | `User`ë¡œ ë³€ê²½ |
| í•™ìƒ ëª©ë¡ì€ í‘œì‹œë¨ | `/api/admin/users`ëŠ” `User` ì‚¬ìš© | âœ… ì •ìƒ |
| ìƒì„±ë§Œ ì‹¤íŒ¨ | `/api/admin/landing-pages`ëŠ” `users` ì‚¬ìš© | âœ… ìˆ˜ì • ì™„ë£Œ |

---

**ì´ì œ 100% í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤!** ğŸ‰

ë°°í¬ ì™„ë£Œ í›„ (2-3ë¶„) í…ŒìŠ¤íŠ¸í•´ì£¼ì„¸ìš”.
