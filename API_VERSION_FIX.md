# ğŸ”§ ìœ ì‚¬ë¬¸ì œ ìƒì„± ì‹¤íŒ¨ - ìµœì¢… í•´ê²°

## âŒ ë¬¸ì œ ìƒí™©

**ì¦ìƒ**: "ìœ ì‚¬ë¬¸ì œ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤" ì•Œë¦¼ í‘œì‹œ

**í™˜ê²½**: 
- âœ… Cloudflare í™˜ê²½ ë³€ìˆ˜ `GOOGLE_GEMINI_API_KEY` ì„¤ì • ì™„ë£Œ
- âœ… ì¬ë°°í¬ ì™„ë£Œ
- âŒ API í˜¸ì¶œ ì‹œ ì—ëŸ¬ ë°œìƒ

---

## ğŸ” ì—ëŸ¬ ë¶„ì„

### API í…ŒìŠ¤íŠ¸ ê²°ê³¼

```bash
curl -X POST https://superplacestudy.pages.dev/api/homework/generate-similar-problems \
  -H "Content-Type: application/json" \
  -d '{
    "studentId": "157",
    "weaknessTypes": ["ë¬¸ì ê³±ì…ˆ ì‹œ ì§€ìˆ˜ ì²˜ë¦¬"],
    "studentName": "í…ŒìŠ¤íŠ¸í•™ìƒ"
  }'
```

**ì‘ë‹µ ì—ëŸ¬**:
```json
{
  "success": false,
  "error": "models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods."
}
```

---

## ğŸ¯ ê·¼ë³¸ ì›ì¸

### API ë²„ì „ ë¶ˆì¼ì¹˜

**ë¬¸ì œ**:
- ì½”ë“œì—ì„œ `v1beta` API ì‚¬ìš©
- `v1beta` ë²„ì „ì€ `gemini-1.5-flash` ëª¨ë¸ì„ ì§€ì›í•˜ì§€ ì•ŠìŒ
- `v1` ë²„ì „ë§Œ `gemini-1.5-flash` ëª¨ë¸ ì§€ì›

**AS-IS (ì˜ëª»ëœ ì½”ë“œ)**:
```typescript
// âŒ v1beta API (gemini-1.5-flash ë¯¸ì§€ì›)
const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;
```

**TO-BE (ìˆ˜ì •ëœ ì½”ë“œ)**:
```typescript
// âœ… v1 API (gemini-1.5-flash ì§€ì›)
const apiUrl = `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;
```

---

## âœ… í•´ê²° ë°©ë²•

### ì½”ë“œ ìˆ˜ì •

**íŒŒì¼**: `functions/api/homework/generate-similar-problems.ts`

**ë³€ê²½ ë‚´ìš©**:
```diff
- const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GOOGLE_GEMINI_API_KEY}`;
+ const apiUrl = `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${GOOGLE_GEMINI_API_KEY}`;
```

**ë³€ê²½ ë¼ì¸**: 160ë²ˆ ì¤„  
**ë³€ê²½ ì‚¬í•­**: `v1beta` â†’ `v1`

---

## ğŸ“Š API ë²„ì „ ë¹„êµ

| í•­ëª© | v1beta | v1 |
|------|--------|-----|
| **gemini-1.5-flash** | âŒ ë¯¸ì§€ì› | âœ… ì§€ì› |
| **gemini-1.5-pro** | âš ï¸ ì œí•œì  | âœ… ì™„ì „ ì§€ì› |
| **ì•ˆì •ì„±** | âš ï¸ ì‹¤í—˜ì  | âœ… ì•ˆì •ì  |
| **ê¶Œì¥ ì‚¬ìš©** | âŒ ë¹„ê¶Œì¥ | âœ… ê¶Œì¥ |

---

## ğŸ§ª ìˆ˜ì • í›„ í…ŒìŠ¤íŠ¸

### API ì§ì ‘ í…ŒìŠ¤íŠ¸

```bash
curl -X POST https://superplacestudy.pages.dev/api/homework/generate-similar-problems \
  -H "Content-Type: application/json" \
  -d '{
    "studentId": "157",
    "weaknessTypes": ["ë¬¸ì ê³±ì…ˆ ì‹œ ì§€ìˆ˜ ì²˜ë¦¬"],
    "studentName": "í…ŒìŠ¤íŠ¸í•™ìƒ"
  }'
```

**ì˜ˆìƒ ì„±ê³µ ì‘ë‹µ**:
```json
{
  "success": true,
  "problems": "<div class='problem-section'>\n  <h2 class='weakness-title'>ğŸ¯ ì•½ì : ë¬¸ì ê³±ì…ˆ ì‹œ ì§€ìˆ˜ ì²˜ë¦¬</h2>\n  ...",
  "weaknessTypes": ["ë¬¸ì ê³±ì…ˆ ì‹œ ì§€ìˆ˜ ì²˜ë¦¬"],
  "studentName": "í…ŒìŠ¤íŠ¸í•™ìƒ",
  "generatedAt": "2026-02-10T23:50:00.000Z",
  "model": "gemini-1.5-flash"
}
```

---

## ğŸ“¦ ë°°í¬ ì •ë³´

**ì»¤ë°‹**: `9bb5569` - fix: correct Gemini API version from v1beta to v1

**ë³€ê²½ ì‚¬í•­**:
```
1 file changed, 2 insertions(+), 2 deletions(-)
```

**ë³€ê²½ íŒŒì¼**:
- `functions/api/homework/generate-similar-problems.ts` (160ë²ˆ ì¤„)

**ë°°í¬ ìƒíƒœ**:
- âœ… ì½”ë“œ ìˆ˜ì • ì™„ë£Œ
- âœ… ë¡œì»¬ ë¹Œë“œ ì„±ê³µ
- âœ… GitHub í‘¸ì‹œ ì™„ë£Œ
- ğŸ”„ Cloudflare Pages ë°°í¬ ì§„í–‰ ì¤‘

**ë°°í¬ ì™„ë£Œ ì˜ˆì •**: 2026-02-10 23:55 UTC (ì•½ 5ë¶„ í›„)

---

## âœ… í…ŒìŠ¤íŠ¸ ì ˆì°¨

### 1ë‹¨ê³„: ë°°í¬ ì™„ë£Œ ëŒ€ê¸°
- â±ï¸ ë°°í¬ ì‹œê°„: ì•½ 5ë¶„
- ğŸ”— Cloudflare Dashboardì—ì„œ ë°°í¬ ìƒíƒœ í™•ì¸

### 2ë‹¨ê³„: ë¸Œë¼ìš°ì € ìºì‹œ ì´ˆê¸°í™”
```
ë°©ë²• 1: ì‹œí¬ë¦¿ ëª¨ë“œ ì‚¬ìš© (ê¶Œì¥)
  - Chrome: Ctrl + Shift + N
  - Firefox: Ctrl + Shift + P

ë°©ë²• 2: í•˜ë“œ ë¦¬í”„ë ˆì‹œ
  - Ctrl + Shift + R
  - ë˜ëŠ” F12 â†’ Network â†’ Disable cache
```

### 3ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ì‹¤í–‰
1. **ì ‘ì†**: https://superplacestudy.pages.dev/dashboard/students/detail/?id=157
2. **ë²„íŠ¼ í´ë¦­**: "ìœ ì‚¬ë¬¸ì œ ì¶œì œ" (ğŸ¯)
3. **ëŒ€ê¸°**: 5-10ì´ˆ
4. **ê²°ê³¼ í™•ì¸**: ìƒˆ íƒ­ì—ì„œ ë¬¸ì œ í‘œì‹œ

### 4ë‹¨ê³„: ê²°ê³¼ ê²€ì¦

**ì„±ê³µ ì‹œ**:
- âœ… ìƒˆ íƒ­ì´ ì—´ë¦¼
- âœ… ì•½ì  ìœ í˜•ë³„ ë¬¸ì œ í‘œì‹œ
- âœ… 3ë‹¨ê³„ ë‚œì´ë„ (ê¸°ë³¸/ë³€í˜•/ì‹¬í™”)
- âœ… ê° ë¬¸ì œë§ˆë‹¤ íŒíŠ¸ ë° í’€ì´
- âœ… ì¸ì‡„ ê°€ëŠ¥

**ì‹¤íŒ¨ ì‹œ**:
- F12 â†’ Console íƒ­ì—ì„œ ì—ëŸ¬ í™•ì¸
- Network íƒ­ì—ì„œ API ì‘ë‹µ í™•ì¸
- 5ë¶„ ë” ëŒ€ê¸° í›„ ì¬ì‹œë„

---

## ğŸ› ì¶”ê°€ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: ì—¬ì „íˆ ê°™ì€ ì—ëŸ¬ ë°œìƒ

**ì›ì¸**: ë°°í¬ê°€ ì™„ë£Œë˜ì§€ ì•Šì•˜ê±°ë‚˜ ìºì‹œ ë¬¸ì œ

**í•´ê²°**:
1. 5ë¶„ ëŒ€ê¸°
2. ì‹œí¬ë¦¿ ëª¨ë“œë¡œ ì¬ì‹œë„
3. Cloudflare Dashboardì—ì„œ ë°°í¬ ìƒíƒœ í™•ì¸
   ```
   Workers & Pages â†’ superplace â†’ Deployments
   ```

### ë¬¸ì œ 2: ë‹¤ë¥¸ ì—ëŸ¬ ë©”ì‹œì§€

**"API key not valid"**:
- Cloudflare í™˜ê²½ ë³€ìˆ˜ í™•ì¸
- API í‚¤ ì¬ë°œê¸‰ í›„ ì¬ì„¤ì •
- ì¬ë°°í¬ ì‹¤í–‰

**"Quota exceeded"**:
- API í• ë‹¹ëŸ‰ ì´ˆê³¼
- ë¬´ë£Œ í‹°ì–´: ë¶„ë‹¹ 15íšŒ, ì¼ì¼ 1,500íšŒ
- ì ì‹œ ëŒ€ê¸° ë˜ëŠ” ìœ ë£Œ ì—…ê·¸ë ˆì´ë“œ

**"Timeout"**:
- ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ ë˜ëŠ” ì„œë²„ ë¶€í•˜
- ì¬ì‹œë„

### ë¬¸ì œ 3: ìƒì„±ëœ ë¬¸ì œê°€ ì´ìƒí•¨

**ì›ì¸**: Gemini API ì‘ë‹µ í˜•ì‹ ë¬¸ì œ

**í•´ê²°**: ìë™ ì²˜ë¦¬ë¨
- HTML ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ ìë™ ì œê±°
- ë¶ˆí•„ìš”í•œ í…ìŠ¤íŠ¸ ì •ë¦¬

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

1. **GEMINI_API_SETUP.md** - API í‚¤ ì„¤ì • ê°€ì´ë“œ
2. **SIMILAR_PROBLEM_FIX.md** - ì´ì „ ë¬¸ì œ í•´ê²° ê¸°ë¡
3. **SIMILAR_PROBLEM_GENERATION.md** - ê¸°ëŠ¥ ì„¤ëª…ì„œ

---

## ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸

### ë¬¸ì œì˜ ì›ì¸
```
v1beta API â†’ gemini-1.5-flash ë¯¸ì§€ì› â†’ 404 ì—ëŸ¬
```

### í•´ê²° ë°©ë²•
```
v1beta â†’ v1 APIë¡œ ë³€ê²½ â†’ gemini-1.5-flash ì§€ì› â†’ ì •ìƒ ì‘ë™
```

### ë‹¨ í•œ ì¤„ì˜ ìˆ˜ì •
```typescript
// 160ë²ˆ ì¤„
-   const apiUrl = `...googleapis.com/v1beta/models/...`;
+   const apiUrl = `...googleapis.com/v1/models/...`;
```

---

## ğŸ“ˆ íƒ€ì„ë¼ì¸

| ì‹œê°„ | ì´ë²¤íŠ¸ |
|------|--------|
| 23:30 | Gemini API ì¬í™œì„±í™” (v1beta ì‚¬ìš©) |
| 23:35 | í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì•ˆë‚´ |
| 23:45 | ì‚¬ìš©ì "ìœ ì‚¬ë¬¸ì œ ìƒì„± ì‹¤íŒ¨" ë³´ê³  |
| 23:46 | API í…ŒìŠ¤íŠ¸ â†’ v1beta ì—ëŸ¬ ë°œê²¬ |
| 23:48 | v1beta â†’ v1 ìˆ˜ì • |
| 23:50 | ë¹Œë“œ ë° ë°°í¬ ì™„ë£Œ |
| 23:55 | **ë°°í¬ ì™„ë£Œ ì˜ˆì •** â­ |

---

## âœ… ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì™„ë£Œëœ ì‘ì—…**:
- [x] v1beta â†’ v1 API ë²„ì „ ë³€ê²½
- [x] ë¡œì»¬ ë¹Œë“œ ì„±ê³µ
- [x] GitHub ì»¤ë°‹ ë° í‘¸ì‹œ
- [x] ë¬¸ì„œ ì‘ì„±

**ë°°í¬ í›„ í™•ì¸**:
- [ ] 5ë¶„ ëŒ€ê¸°
- [ ] ë¸Œë¼ìš°ì € ìºì‹œ ì´ˆê¸°í™”
- [ ] API ì§ì ‘ í…ŒìŠ¤íŠ¸
- [ ] ë¸Œë¼ìš°ì €ì—ì„œ ë²„íŠ¼ í…ŒìŠ¤íŠ¸
- [ ] ìƒì„±ëœ ë¬¸ì œ í™•ì¸
- [ ] ì¸ì‡„ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

---

## ğŸ‰ ì˜ˆìƒ ê²°ê³¼

### ì„±ê³µ ì‹œë‚˜ë¦¬ì˜¤

1. **ë²„íŠ¼ í´ë¦­** (ğŸ¯ ìœ ì‚¬ë¬¸ì œ ì¶œì œ)
2. **ë¡œë”© í‘œì‹œ** ("ìƒì„± ì¤‘..." 5-10ì´ˆ)
3. **ìƒˆ íƒ­ ì—´ë¦¼**
4. **ë¬¸ì œ í‘œì‹œ**:
   ```
   ğŸ“š í…ŒìŠ¤íŠ¸í•™ìƒë‹˜ ë§ì¶¤ ìœ ì‚¬ë¬¸ì œ
   
   ğŸ¯ ì•½ì : ë¬¸ì ê³±ì…ˆ ì‹œ ì§€ìˆ˜ ì²˜ë¦¬
   
   ğŸ“Œ ê¸°ë³¸ ìœ í˜• ë¬¸ì œ
   ë¬¸ì œ: x Ã— xë¥¼ ê°„ë‹¨íˆ í•˜ì‹œì˜¤.
   ğŸ’¡ íŒíŠ¸: ê°™ì€ ë¬¸ìë¼ë¦¬ ê³±í•˜ë©´...
   âœ… ì •ë‹µ: xÂ²
   
   ğŸ”„ ë³€í˜• ë¬¸ì œ
   ë¬¸ì œ: 3x Ã— 2xë¥¼ ê°„ë‹¨íˆ í•˜ì‹œì˜¤.
   ğŸ’¡ íŒíŠ¸: ê³„ìˆ˜ëŠ” ê³„ìˆ˜ë¼ë¦¬...
   âœ… ì •ë‹µ: 6xÂ²
   
   ğŸš€ ì‹¬í™” ë¬¸ì œ
   ë¬¸ì œ: (2x)Â² Ã— 3xë¥¼ ê°„ë‹¨íˆ í•˜ì‹œì˜¤.
   ğŸ’¡ íŒíŠ¸: ë¨¼ì € (2x)Â²ë¥¼ ì „ê°œ...
   âœ… ì •ë‹µ: 12xÂ³
   ```

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ (ë°°í¬ ì™„ë£Œ í›„ 5ë¶„):

1. âœ… ë¸Œë¼ìš°ì € ìºì‹œ ì´ˆê¸°í™”
2. âœ… í…ŒìŠ¤íŠ¸ URL ì ‘ì†
3. âœ… "ìœ ì‚¬ë¬¸ì œ ì¶œì œ" ë²„íŠ¼ í´ë¦­
4. âœ… 5-10ì´ˆ ëŒ€ê¸°
5. âœ… ìƒˆ íƒ­ì—ì„œ AI ìƒì„± ë¬¸ì œ í™•ì¸

### í™•ì¸ ì‚¬í•­:

- âœ… ì•½ì  ìœ í˜•ë³„ 3ë‹¨ê³„ ë¬¸ì œ ìƒì„±ë¨
- âœ… ê° ë¬¸ì œë§ˆë‹¤ íŒíŠ¸ ë° í’€ì´ í¬í•¨
- âœ… ìˆ˜í•™ ê¸°í˜¸ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œ (Â², Â³, Ã—, Ã·)
- âœ… ì¸ì‡„ ê°€ëŠ¥

---

## ğŸ”— ì°¸ê³  ì •ë³´

### Gemini API ê³µì‹ ë¬¸ì„œ
- **v1 API**: https://ai.google.dev/api/rest/v1
- **v1beta API**: https://ai.google.dev/api/rest/v1beta (ì‹¤í—˜ì )
- **ëª¨ë¸ ëª©ë¡**: https://ai.google.dev/models

### ì§€ì›í•˜ëŠ” ëª¨ë¸ (v1 API)
- âœ… `gemini-1.5-flash` (ë¹ ë¦„, íš¨ìœ¨ì )
- âœ… `gemini-1.5-pro` (ê³ í’ˆì§ˆ)
- âœ… `gemini-1.0-pro` (ì•ˆì •ì )

### ì§€ì›í•˜ì§€ ì•ŠëŠ” ëª¨ë¸ (v1beta API)
- âŒ `gemini-1.5-flash` (v1ìœ¼ë¡œ ì´ë™)
- âŒ ì¼ë¶€ ì‹¤í—˜ì  ëª¨ë¸

---

**ì‘ì„±ì¼**: 2026-02-10 23:50 UTC  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-02-10 23:50 UTC  
**ìƒíƒœ**: âœ… **API ë²„ì „ ìˆ˜ì • ì™„ë£Œ ë° ë°°í¬ ì§„í–‰ ì¤‘**  
**ì»¤ë°‹**: 9bb5569  
**ë°°í¬ ì™„ë£Œ ì˜ˆì •**: 2026-02-10 23:55 UTC  
**í…ŒìŠ¤íŠ¸ URL**: https://superplacestudy.pages.dev/dashboard/students/detail/?id=157

---

## ğŸŠ ìµœì¢… ìš”ì•½

**ë¬¸ì œ**: Gemini API v1betaê°€ gemini-1.5-flash ë¯¸ì§€ì›  
**í•´ê²°**: v1beta â†’ v1 APIë¡œ ë³€ê²½ (ë‹¨ 1ì¤„ ìˆ˜ì •)  
**ê²°ê³¼**: ì •ìƒ ì‘ë™ ì˜ˆìƒ  
**ë°°í¬**: 5ë¶„ í›„ ì™„ë£Œ ì˜ˆì •  
**í…ŒìŠ¤íŠ¸**: ë¸Œë¼ìš°ì € ìºì‹œ ì´ˆê¸°í™” í›„ ì¦‰ì‹œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ ğŸš€
