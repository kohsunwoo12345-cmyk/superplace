# 관리자 시스템 사용 가이드

## 1. 관리자 권한 부여하기

### 방법 1: 명령어로 사용자를 관리자로 승격

```bash
# 터미널에서 실행
cd /home/user/webapp
node make-admin.js <사용자_이메일>

# 예시
node make-admin.js newadmin@example.com
```

### 방법 2: 직접 데이터베이스 수정

```bash
# 사용자 목록 확인
node check-users.js

# make-admin.js 스크립트 사용
node make-admin.js user@example.com
```

---

## 2. 관리자 로그인

### 테스트용 관리자 계정
- **이메일**: test@example.com
- **비밀번호**: testpassword123
- **권한**: SUPERADMIN

### 로그인 방법
1. 홈페이지 접속
2. 우측 상단 "로그인" 클릭
3. 계정 정보 입력
4. 대시보드 접속

---

## 3. 관리자 대시보드 접근

### 접근 방법
로그인 후, 좌측 사이드바에서 **"관리자"** 메뉴를 클릭합니다.

> ⚠️ 주의: 일반 사용자(USER)는 이 메뉴가 보이지 않습니다!

### URL 직접 접근
https://your-domain.com/dashboard/admin

---

## 4. 관리자 대시보드 기능

### 📊 주요 통계 카드

#### 1) 전체 사용자
- 등록된 총 사용자 수
- 이번 달 신규 가입자 수

#### 2) 활성 구독
- 현재 활성화된 구독 수
- 전체 사용자 대비 구독률

#### 3) 이번 달 매출
- 당월 총 매출액
- 전월 대비 성장률

#### 4) 플랫폼 연동
- 연결된 소셜미디어 계정 수
- 총 연동 수

---

## 5. 사용자 관리

### 사용자 목록 보기
관리자 대시보드에서 최근 가입한 사용자 10명을 확인할 수 있습니다.

**표시 정보:**
- 사용자 이름
- 이메일 주소
- 가입일
- 권한 등급 (USER / ADMIN / SUPERADMIN)

### 사용자 정보
각 사용자 카드에서 확인 가능한 정보:
- 이름
- 이메일
- 가입일
- 현재 권한

---

## 6. 구독 현황 분석

### 플랜별 구독 분포
관리자 대시보드 하단에서 각 플랜별 가입자 수를 확인할 수 있습니다:

- **무료 플랜**: 무료 사용자 수
- **베이직 플랜**: 월 29,000원 구독자
- **프리미엄 플랜**: 월 49,000원 구독자
- **엔터프라이즈 플랜**: 맞춤형 구독자

---

## 7. 권한 체계

### 권한 종류

#### USER (일반 사용자)
- 기본 대시보드 접근
- 마케팅 도구 사용
- 자신의 데이터만 조회
- ❌ 관리자 메뉴 접근 불가

#### ADMIN (관리자)
- 모든 USER 권한
- ✅ 관리자 대시보드 접근
- ✅ 전체 사용자 통계 조회
- ✅ 매출 현황 확인

#### SUPERADMIN (최고 관리자)
- 모든 ADMIN 권한
- ✅ 다른 사용자를 관리자로 승격 가능
- ✅ 시스템 설정 변경 권한
- ✅ 모든 데이터 접근 권한

---

## 8. 실제 사용 예시

### 시나리오 1: 신규 관리자 추가

1. 일반 사용자가 회원가입
   - 이메일: newadmin@company.com
   - 자동으로 USER 권한 부여

2. 서버에서 관리자로 승격
   ```bash
   node make-admin.js newadmin@company.com
   ```

3. 해당 사용자가 로그아웃 후 재로그인
   - 좌측 사이드바에 "관리자" 메뉴 표시됨

4. 관리자 대시보드 접근 가능

### 시나리오 2: 통계 확인

1. 관리자로 로그인
2. "관리자" 메뉴 클릭
3. 다음 정보 확인:
   - 오늘 신규 가입자 수
   - 이번 달 매출
   - 플랫폼별 구독 현황

---

## 9. 문제 해결

### Q: 관리자 메뉴가 보이지 않아요
**A**: 다음을 확인하세요:
1. 해당 계정이 ADMIN 또는 SUPERADMIN 권한이 있는지 확인
2. 로그아웃 후 다시 로그인
3. 브라우저 캐시 삭제

### Q: 관리자로 승격했는데 권한이 없다고 나와요
**A**: 
1. 데이터베이스에서 권한이 제대로 변경되었는지 확인
   ```bash
   node check-users.js
   ```
2. 세션을 초기화하기 위해 로그아웃 후 재로그인

### Q: 어떤 사용자를 관리자로 만들어야 하나요?
**A**: 
- 회사의 실제 관리자
- 시스템을 관리할 책임자
- 통계와 매출을 확인할 필요가 있는 사람

---

## 10. 보안 주의사항

### ⚠️ 중요!

1. **관리자 계정 관리**
   - 관리자 권한은 신중하게 부여
   - 정기적으로 관리자 목록 검토

2. **비밀번호 보안**
   - 강력한 비밀번호 사용
   - 정기적으로 비밀번호 변경

3. **권한 최소화 원칙**
   - 필요한 사람에게만 관리자 권한 부여
   - 퇴사자의 계정은 즉시 권한 회수

---

## 11. API 엔드포인트

관리자 전용 API:

```
GET /api/admin/stats
- 전체 통계 조회
- 권한: ADMIN 이상 필요
```

---

## 12. 향후 추가될 기능

- [ ] 사용자 상세 정보 편집
- [ ] 사용자 계정 정지/활성화
- [ ] 구독 수동 변경
- [ ] 결제 내역 상세 조회
- [ ] 리포트 생성 및 다운로드
- [ ] 활동 로그 확인
