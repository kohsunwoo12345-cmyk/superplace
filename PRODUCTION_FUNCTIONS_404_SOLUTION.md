# ğŸš¨ í”„ë¡œë•ì…˜ Functions 404 ë¬¸ì œ - ìµœì¢… ì§„ë‹¨ ë° í•´ê²° ë°©ë²•

**ë‚ ì§œ**: 2026-02-19 00:02 (KST)  
**ìƒíƒœ**: ğŸ”´ í”„ë¡œë•ì…˜ Functions ì—¬ì „íˆ 404  
**ì›ì¸**: í”„ë¦¬ë·°ì™€ í”„ë¡œë•ì…˜ì´ ë‹¤ë¥¸ ë¹Œë“œ ì„¤ì • ì‚¬ìš©

---

## ğŸ“Š í˜„ì¬ ìƒíƒœ ìš”ì•½

### âœ… ì„±ê³µí•œ ë¶€ë¶„
- **í”„ë¦¬ë·° ë°°í¬** (d8533809...): Functions ì •ìƒ ì‘ë™ (401/400)
- **í”„ë¡œë•ì…˜ HTML**: ìµœì‹  ë¹Œë“œ ID (`TEo0V2q2ft3wnmT_b3fwB`) í™•ì¸
- **ì½”ë“œ ìˆ˜ì •**: cloudflare-build.shì— Functions ë³µì‚¬ ì¶”ê°€

### âŒ ì—¬ì „íˆ ì‹¤íŒ¨
- **í”„ë¡œë•ì…˜ Functions**: `/api/auth/login` â†’ 404
- **ì›ì¸**: Functions íŒŒì¼ì´ í”„ë¡œë•ì…˜ ë°°í¬ ê²°ê³¼ë¬¼ì— í¬í•¨ë˜ì§€ ì•ŠìŒ

---

## ğŸ” ë¬¸ì œ ì§„ë‹¨

### í”„ë¦¬ë·° vs í”„ë¡œë•ì…˜

| ì—”ë“œí¬ì¸íŠ¸ | í”„ë¦¬ë·° | í”„ë¡œë•ì…˜ | ì°¨ì´ |
|-----------|--------|----------|------|
| `/api/auth/login` | 401 âœ… | 404 âŒ | Functions ì—†ìŒ |
| `/api/auth/signup` | 400 âœ… | 404 âŒ | Functions ì—†ìŒ |
| `/` | 200 âœ… | 200 âœ… | HTML ì—…ë°ì´íŠ¸ë¨ |

### ê°€ëŠ¥í•œ ì›ì¸

1. **Cloudflare ë¹Œë“œ ëª…ë ¹ ë‹¤ë¦„**:
   - í”„ë¦¬ë·°: `bash cloudflare-build.sh` (Functions í¬í•¨)
   - í”„ë¡œë•ì…˜: ë‹¤ë¥¸ ëª…ë ¹ ì‚¬ìš©? (Functions ëˆ„ë½)

2. **ë¹Œë“œ ì¶œë ¥ ë””ë ‰í† ë¦¬ ì„¤ì •**:
   - `wrangler.toml`: `pages_build_output_dir = "out"`
   - FunctionsëŠ” `out/functions/`ì— ìˆì–´ì•¼ í•¨
   - í”„ë¡œë•ì…˜ ë¹Œë“œê°€ `out/` ëŒ€ì‹  ë‹¤ë¥¸ ë””ë ‰í† ë¦¬ ì‚¬ìš©?

3. **Functions ì¸ì‹ ì‹¤íŒ¨**:
   - Cloudflare Pagesê°€ `functions/` í´ë”ë¥¼ ì¸ì‹í•˜ì§€ ëª»í•¨
   - í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ `functions/`ë§Œ ì¸ì‹ (out/functions/ ë¬´ì‹œ?)

---

## âœ… ì¦‰ì‹œ í•´ê²° ë°©ë²• 3ê°€ì§€

### ğŸ¥‡ ë°©ë²• 1: í”„ë¦¬ë·° ë°°í¬ë¥¼ í”„ë¡œë•ì…˜ìœ¼ë¡œ ìŠ¹ê²© (ê°€ì¥ ë¹ ë¦„)

**ì ˆì°¨**:
1. https://dash.cloudflare.com/ ì ‘ì†
2. **Workers & Pages** â†’ **superplacestudy** ì„ íƒ
3. **Deployments** íƒ­ í´ë¦­
4. **í”„ë¦¬ë·° ë°°í¬** ì°¾ê¸° (ì˜ˆ: `d8533809...`)
5. í•´ë‹¹ ë°°í¬ì˜ **â‹® (ë”ë³´ê¸°)** í´ë¦­
6. **Promote to Production** ì„ íƒ
7. í™•ì¸ í›„ **Promote** í´ë¦­

**ì˜ˆìƒ ì‹œê°„**: 1-2ë¶„  
**ê²°ê³¼**: í”„ë¦¬ë·°ì™€ ë™ì¼í•œ Functions ì‘ë™

---

### ğŸ¥ˆ ë°©ë²• 2: í”„ë¡œë•ì…˜ ë¹Œë“œ ì„¤ì • ë³€ê²½

**ì ˆì°¨**:
1. https://dash.cloudflare.com/ ì ‘ì†
2. **Workers & Pages** â†’ **superplacestudy**
3. **Settings** â†’ **Builds & deployments**
4. **Build configurations** í™•ì¸:

#### í˜„ì¬ ì„¤ì • (ì¶”ì •)
```
Build command: npm run build
Build output directory: .vercel/output/static
```

#### ì˜¬ë°”ë¥¸ ì„¤ì •
```
Build command: bash cloudflare-build.sh
Build output directory: out
Root directory: (ë¹„ì–´ ìˆìŒ ë˜ëŠ” /)
```

5. **Edit configuration** í´ë¦­
6. ìœ„ ì„¤ì •ìœ¼ë¡œ ë³€ê²½
7. **Save** í´ë¦­
8. **Deployments** â†’ **Retry deployment**

**ì˜ˆìƒ ì‹œê°„**: 5-7ë¶„ (ì¬ë¹Œë“œ í¬í•¨)

---

### ğŸ¥‰ ë°©ë²• 3: Functionsë¥¼ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¡œ ì´ë™

**ì´ìœ **: Cloudflare PagesëŠ” `í”„ë¡œì íŠ¸_ë£¨íŠ¸/functions/` ë§Œ ì¸ì‹í•  ìˆ˜ ìˆìŒ

**ì ˆì°¨**:
```bash
# í˜„ì¬ ìƒíƒœ
/home/user/webapp/
  â”œâ”€â”€ functions/           â† ì—¬ê¸° ìˆìŒ
  â”‚   â””â”€â”€ api/
  â”‚       â””â”€â”€ auth/
  â”‚           â”œâ”€â”€ login.ts
  â”‚           â””â”€â”€ signup.ts
  â”œâ”€â”€ out/
  â”‚   â””â”€â”€ functions/       â† ë¹Œë“œ ì‹œ ë³µì‚¬ë˜ì§€ë§Œ ì¸ì‹ ì•ˆë¨?
  â””â”€â”€ ...

# í•´ê²°: ë¹Œë“œ ê²°ê³¼ë¬¼ì—ì„œ functionsë¥¼ ë£¨íŠ¸ë¡œ ì‹¬ë³¼ë¦­ ë§í¬
```

**ì½”ë“œ ìˆ˜ì •** (cloudflare-build.sh):
```bash
# ê¸°ì¡´
cp -r functions out/functions

# ë³€ê²½ (í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìœ ì§€)
# FunctionsëŠ” ì´ë¯¸ ë£¨íŠ¸ì— ìˆìœ¼ë¯€ë¡œ ë³µì‚¬ ë¶ˆí•„ìš”
# Cloudflareê°€ ìë™ìœ¼ë¡œ /functions/ë¥¼ ì¸ì‹
```

---

## ğŸ¯ ê¶Œì¥ í•´ê²° ìˆœì„œ

### ë‹¨ê³„ 1: í”„ë¦¬ë·° ìŠ¹ê²© (ì¦‰ì‹œ í•´ê²°)
â†’ **ë°©ë²• 1** ì‹¤í–‰í•˜ì—¬ ì¦‰ì‹œ í”„ë¡œë•ì…˜ ë³µêµ¬

### ë‹¨ê³„ 2: ë¹Œë“œ ì„¤ì • í™•ì¸ (ì¥ê¸° í•´ê²°)
â†’ **ë°©ë²• 2** ì‹¤í–‰í•˜ì—¬ ìë™ ë°°í¬ ìˆ˜ì •

### ë‹¨ê³„ 3: ê²€ì¦
â†’ `node test_preview_vs_production.js` ì‹¤í–‰

---

## ğŸ“‹ ë°©ë²• 1 ìƒì„¸ ê°€ì´ë“œ

### 1. Cloudflare Dashboard ì ‘ì†
```
https://dash.cloudflare.com/
â†’ Workers & Pages
â†’ superplacestudy
```

### 2. í”„ë¦¬ë·° ë°°í¬ ì°¾ê¸°
```
Deployments íƒ­
â†’ í”„ë¦¬ë·° ë°°í¬ ëª©ë¡ì—ì„œ
â†’ "Production branch (main)" ì„¹ì…˜ ì•„ë˜ "Preview deployments" í™•ì¸
â†’ d8533809... ê°™ì€ í”„ë¦¬ë·° URL ì°¾ê¸°
```

### 3. í”„ë¡œë•ì…˜ ìŠ¹ê²©
```
í•´ë‹¹ ë°°í¬ ì˜¤ë¥¸ìª½
â†’ â‹® (ì„¸ë¡œ ì  3ê°œ)
â†’ "Promote to Production" ì„ íƒ
â†’ í™•ì¸ ì°½ì—ì„œ "Promote" í´ë¦­
```

### 4. ë°°í¬ ì™„ë£Œ ëŒ€ê¸° (1-2ë¶„)

### 5. ê²€ì¦
```bash
# ë¡œì»¬ì—ì„œ ê²€ì¦
cd /home/user/webapp
node test_preview_vs_production.js

# ì˜ˆìƒ ê²°ê³¼
âœ… í”„ë¦¬ë·°ì™€ í”„ë¡œë•ì…˜ì´ 100% ë™ì¼í•©ë‹ˆë‹¤!
```

### 6. ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
```
1. ì‹œí¬ë¦¿ ëª¨ë“œ ì—´ê¸°
2. https://superplacestudy.pages.dev/login/ ì ‘ì†
3. admin@superplace.com / admin1234 ë¡œê·¸ì¸
4. âœ… ë¡œê·¸ì¸ ì„±ê³µ í™•ì¸
```

---

## ğŸ”§ ë°©ë²• 2 ìƒì„¸ ê°€ì´ë“œ

### Cloudflare ë¹Œë“œ ì„¤ì • ë³€ê²½

#### í˜„ì¬ ì„¤ì • (ë¬¸ì œ)
```
Build command: npm run build
   â†“
   next build
   â†“
   .vercel/output/static/
   â†“
   Cloudflareê°€ ì´ê²ƒë§Œ ë°°í¬
   â†“
   functions/ ì—†ìŒ âŒ
```

#### ì˜¬ë°”ë¥¸ ì„¤ì • (í•´ê²°)
```
Build command: bash cloudflare-build.sh
   â†“
   npx @cloudflare/next-on-pages
   â†“
   .vercel/output/static/ â†’ out/
   â†“
   functions/ â†’ out/functions/
   â†“
   Cloudflareê°€ out/ ë°°í¬
   â†“
   functions/ í¬í•¨ âœ…
```

#### ì„¤ì • ë³€ê²½ ë‹¨ê³„
1. Settings â†’ Builds & deployments
2. Production branch ì„¹ì…˜ì—ì„œ **Edit configuration**
3. ë³€ê²½:
   ```
   Build command: bash cloudflare-build.sh
   Build output directory: out
   ```
4. **Save** í´ë¦­
5. Deployments â†’ **Retry deployment**
6. ë¹Œë“œ ë¡œê·¸ í™•ì¸:
   ```
   âœ… Functions copied to out/functions/
   âœ… out/functions directory exists
   ```

---

## ğŸ“Š ì˜ˆìƒ ê²°ê³¼

### ì„±ê³µ ì‹œ (ë°©ë²• 1 ë˜ëŠ” 2)
```bash
$ node test_preview_vs_production.js

================================================================================
ğŸ“Š SUMMARY
================================================================================

ğŸ¯ Result: 5/5 endpoints match
   âœ… /api/auth/login (401)
   âœ… /api/auth/signup (400)
   âœ… /api/login (405)
   âœ… / (200)
   âœ… /login (308/200)

âœ… í”„ë¦¬ë·°ì™€ í”„ë¡œë•ì…˜ì´ 100% ë™ì¼í•©ë‹ˆë‹¤!
```

### ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
- âœ… ë¡œê·¸ì¸ í˜ì´ì§€ ë¡œë“œ
- âœ… í…ŒìŠ¤íŠ¸ ê³„ì • ë¡œê·¸ì¸ ì„±ê³µ
- âœ… ëŒ€ì‹œë³´ë“œ ì •ìƒ í‘œì‹œ
- âœ… í•™ì›ì¥: SMS ë©”ë‰´ í‘œì‹œ
- âœ… ê¸°ì¡´ ì‚¬ìš©ì ë¡œê·¸ì¸ ê°€ëŠ¥

---

## ğŸš¨ ì¤‘ìš”: ì™œ í”„ë¦¬ë·°ëŠ” ì‘ë™í•˜ê³  í”„ë¡œë•ì…˜ì€ ì•ˆ ë˜ë‚˜?

### í”„ë¦¬ë·° ë°°í¬ íŠ¹ì§•
- **ìë™ ë°°í¬**: GitHub PRì´ë‚˜ branch push ì‹œ
- **ë¹Œë“œ ëª…ë ¹**: Cloudflareê°€ ìë™ ê°ì§€ (wrangler.toml ë˜ëŠ” ê¸°ë³¸ê°’)
- **ê²°ê³¼**: Functions ì •ìƒ ì‘ë™ âœ…

### í”„ë¡œë•ì…˜ ë°°í¬ íŠ¹ì§•
- **ìˆ˜ë™ ì„¤ì •**: Dashboardì—ì„œ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •ëœ ë¹Œë“œ ëª…ë ¹ ì‚¬ìš©
- **ë¹Œë“œ ëª…ë ¹**: `npm run build` (ì¶”ì •)
- **ê²°ê³¼**: Functions ëˆ„ë½ âŒ

### í•´ê²°ì±…
í”„ë¦¬ë·°ì™€ í”„ë¡œë•ì…˜ì´ **ë™ì¼í•œ ë¹Œë“œ ëª…ë ¹**ì„ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì • ë³€ê²½

---

## â±ï¸ íƒ€ì„ë¼ì¸ ë° ë‹¤ìŒ ë‹¨ê³„

### ì§€ê¸ˆê¹Œì§€
```
23:43  trailingSlash ìˆ˜ì •
23:48  Functions ë°°í¬ ì‹œë„
23:51  ì¬ê·€ ì˜¤ë¥˜ ë°œìƒ
00:00  cloudflare-build.sh ìˆ˜ì •
00:02  ê²€ì¦ â†’ ì—¬ì „íˆ 404
```

### ë‹¤ìŒ ë‹¨ê³„ (ì‚¬ìš©ì ì•¡ì…˜ í•„ìš”)
```
00:05  ë°©ë²• 1: í”„ë¦¬ë·° ìŠ¹ê²© (ì¦‰ì‹œ í•´ê²°)
00:10  ê²€ì¦ â†’ ì„±ê³µ í™•ì¸
00:15  ë°©ë²• 2: ë¹Œë“œ ì„¤ì • ë³€ê²½ (ì¥ê¸° í•´ê²°)
00:20  ì¬ë°°í¬ â†’ ê²€ì¦ â†’ ì™„ë£Œ
```

---

## ğŸ“ ìµœì¢… ê¶Œì¥ì‚¬í•­

### ğŸ¯ ì§€ê¸ˆ ì¦‰ì‹œ
**ë°©ë²• 1 ì‹¤í–‰**: Cloudflare Dashboardì—ì„œ í”„ë¦¬ë·° ë°°í¬ ìŠ¹ê²©
- ì‹œê°„: 1-2ë¶„
- ê²°ê³¼: í”„ë¡œë•ì…˜ ì¦‰ì‹œ ë³µêµ¬
- ìœ„í—˜: ì—†ìŒ

### ğŸ”§ ì´í›„ ì¡°ì¹˜
**ë°©ë²• 2 ì‹¤í–‰**: ë¹Œë“œ ì„¤ì • ë³€ê²½
- ì‹œê°„: 5-10ë¶„
- ê²°ê³¼: í–¥í›„ ìë™ ë°°í¬ ì‹œ Functions í¬í•¨
- í•„ìš”ì„±: í•„ìˆ˜ (ì§€ì† ê°€ëŠ¥í•œ í•´ê²°)

---

**í˜„ì¬ ì‹œê°**: 2026-02-19 00:02  
**ìƒíƒœ**: ğŸ”´ í”„ë¡œë•ì…˜ Functions 404  
**í•´ê²° ë°©ë²•**: Cloudflare Dashboardì—ì„œ í”„ë¦¬ë·° ìŠ¹ê²©

**í”„ë¦¬ë·° URL** (ì‘ë™í•¨): https://d8533809.superplacestudy.pages.dev/  
**í”„ë¡œë•ì…˜ URL** (404): https://superplacestudy.pages.dev/

**í…ŒìŠ¤íŠ¸ ê³„ì •**:
- admin@superplace.com / admin1234
- director@superplace.com / director1234
- admin@superplace.co.kr / admin1234
