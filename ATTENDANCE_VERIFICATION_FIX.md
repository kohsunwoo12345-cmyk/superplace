# ğŸ§ª ì¶œì„ ì½”ë“œ ê²€ì¦ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ› ë°œê²¬ëœ ë¬¸ì œ
**ì¦ìƒ**: "ë³¸ì¸ì˜ ì¶œì„ ì½”ë“œê°€ ì•„ë‹™ë‹ˆë‹¤" ì˜¤ë¥˜ê°€ ê³„ì† ë°œìƒ

## ğŸ” ì›ì¸ ë¶„ì„
- ì½”ë“œ ìƒì„± ì‹œ: `userId`ê°€ `INTEGER`ë¡œ ì €ì¥
- ì½”ë“œ ê²€ì¦ ì‹œ: `String`ìœ¼ë¡œ ë¹„êµ
- íƒ€ì… ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ê²€ì¦ ì‹¤íŒ¨

## âœ… í•´ê²° ë°©ë²•
- `Number()`ë¡œ í†µì¼í•˜ì—¬ ìˆ«ìë¡œ ë¹„êµ
- ë””ë²„ê·¸ ë¡œê¹… ì¶”ê°€í•˜ì—¬ ì‹¤ì œ ê°’ í™•ì¸

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1ë‹¨ê³„: ì¶œì„ ì½”ë“œ ìƒì„±
```bash
# ì„ ìƒë‹˜ì´ í•™ìƒ ID=1 ì˜ ì¶œì„ ì½”ë“œ ìƒì„±
curl -X POST https://genspark-ai-developer.superplacestudy.pages.dev/api/attendance/code \
  -H "Content-Type: application/json" \
  -d '{"userId": 1, "expiresInHours": 24}'

# ì‘ë‹µ ì˜ˆì‹œ:
{
  "success": true,
  "code": {
    "code": "123456",
    "userId": 1,
    ...
  }
}
```

### 2ë‹¨ê³„: ì¶œì„ ì½”ë“œ ê²€ì¦
```bash
# í•™ìƒ ID=1 ì´ ì½”ë“œ ì…ë ¥
curl -X POST https://genspark-ai-developer.superplacestudy.pages.dev/api/attendance/verify \
  -H "Content-Type: application/json" \
  -d '{"userId": 1, "code": "123456"}'

# ì„±ê³µ ì‹œ:
{
  "success": true,
  "message": "ì¶œì„ì´ ì¸ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "recordId": "attendance-...",
  "verifiedAt": "2026-02-06 18:30:00"
}

# ì‹¤íŒ¨ ì‹œ (ë‹¤ë¥¸ ì‚¬ëŒ ì½”ë“œ):
{
  "success": false,
  "message": "ë³¸ì¸ì˜ ì¶œì„ ì½”ë“œê°€ ì•„ë‹™ë‹ˆë‹¤. (ì½”ë“œ ì†Œìœ ì: 1, ìš”ì²­ì: 2)",
  "debug": {
    "codeUserId": 1,
    "requestUserId": 2,
    "codeRecordUserId": 1,
    "bodyUserId": 2
  }
}
```

### 3ë‹¨ê³„: ì¤‘ë³µ ì¶œì„ í…ŒìŠ¤íŠ¸
```bash
# ê°™ì€ ì‚¬ëŒì´ ê°™ì€ ë‚  ë‹¤ì‹œ ì¶œì„ ì‹œë„
curl -X POST https://genspark-ai-developer.superplacestudy.pages.dev/api/attendance/verify \
  -H "Content-Type: application/json" \
  -d '{"userId": 1, "code": "123456"}'

# ì‘ë‹µ:
{
  "success": false,
  "message": "ì˜¤ëŠ˜ ì´ë¯¸ ì¶œì„í•˜ì…¨ìŠµë‹ˆë‹¤."
}
```

## ğŸ¯ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ì •ìƒ ì¼€ì´ìŠ¤
- [ ] ìì‹ ì˜ ì½”ë“œë¡œ ì¶œì„ ì„±ê³µ
- [ ] ì¶œì„ ê¸°ë¡ ì €ì¥ í™•ì¸
- [ ] ì¶œì„ ì‹œê°„ ì •í™•íˆ ê¸°ë¡

### âŒ ì˜¤ë¥˜ ì¼€ì´ìŠ¤
- [ ] ë‹¤ë¥¸ ì‚¬ëŒì˜ ì½”ë“œë¡œ ì¶œì„ ì‹œë„ â†’ "ë³¸ì¸ì˜ ì¶œì„ ì½”ë“œê°€ ì•„ë‹™ë‹ˆë‹¤"
- [ ] ê°™ì€ ë‚  ì¤‘ë³µ ì¶œì„ ì‹œë„ â†’ "ì˜¤ëŠ˜ ì´ë¯¸ ì¶œì„í•˜ì…¨ìŠµë‹ˆë‹¤"
- [ ] ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì½”ë“œ â†’ "ìœ íš¨í•˜ì§€ ì•Šì€ ì¶œì„ ì½”ë“œì…ë‹ˆë‹¤"

## ğŸ” ë””ë²„ê·¸ ì •ë³´

### ìˆ˜ì • ì „ (ë¬¸ì œ)
```typescript
const codeUserId = String(codeRecord.userId);     // "1"
const requestUserId = String(userId);             // "1"
// í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” íƒ€ì… ë³€í™˜ ì´ìŠˆë¡œ ë¹„êµ ì‹¤íŒ¨
```

### ìˆ˜ì • í›„ (í•´ê²°)
```typescript
const codeUserId = Number(codeRecord.userId);     // 1
const requestUserId = Number(userId);             // 1
// ìˆ«ìë¡œ ë¹„êµí•˜ì—¬ ì •í™•í•œ ê²€ì¦
```

## ğŸ“Š ì˜ˆìƒ ê²°ê³¼

| ì‹œë‚˜ë¦¬ì˜¤ | ì½”ë“œ ì†Œìœ ì | ìš”ì²­ì | ê²°ê³¼ |
|---------|-----------|-------|------|
| ì •ìƒ ì¶œì„ | í•™ìƒ A (ID=1) | í•™ìƒ A (ID=1) | âœ… ì„±ê³µ |
| íƒ€ì¸ ì½”ë“œ | í•™ìƒ A (ID=1) | í•™ìƒ B (ID=2) | âŒ "ë³¸ì¸ ì½”ë“œ ì•„ë‹˜" |
| ì¤‘ë³µ ì¶œì„ | í•™ìƒ A (ID=1) | í•™ìƒ A (ID=1) | âŒ "ì´ë¯¸ ì¶œì„í•¨" |
| ì˜ëª»ëœ ì½”ë“œ | - | í•™ìƒ A (ID=1) | âŒ "ìœ íš¨í•˜ì§€ ì•Šì€ ì½”ë“œ" |

## ğŸš€ ë°°í¬ ì •ë³´

- **ì»¤ë°‹**: 0ec9f3e
- **ë¸Œëœì¹˜**: genspark_ai_developer
- **ë°°í¬ URL**: https://genspark-ai-developer.superplacestudy.pages.dev
- **ë³€ê²½ íŒŒì¼**: functions/api/attendance/verify.ts

## ğŸ’¡ ì¶”ê°€ ê°œì„ ì‚¬í•­

### í˜„ì¬ êµ¬í˜„
- âœ… ìˆ«ì íƒ€ì…ìœ¼ë¡œ í†µì¼ ë¹„êµ
- âœ… ë””ë²„ê·¸ ë¡œê¹… ì¶”ê°€
- âœ… ìƒì„¸í•œ ì˜¤ë¥˜ ë©”ì‹œì§€

### í–¥í›„ ê°œì„  (ì œì•ˆ)
- [ ] ì½”ë“œ ë§Œë£Œ ì‹œê°„ ê²€ì¦
- [ ] ì½”ë“œ ì‚¬ìš© íšŸìˆ˜ ì œí•œ
- [ ] ì§€ë¦¬ì  ìœ„ì¹˜ ê²€ì¦ (GPS)
- [ ] QR ì½”ë“œ ì§€ì›

---

**í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„**: ë””ë²„ê·¸ ë©”ì‹œì§€ë¥¼ ì œê±°í•˜ê³  í”„ë¡œë•ì…˜ ë°°í¬ ê¶Œì¥

**ì‘ì„±ì¼**: 2026-02-06  
**ì‘ì„±ì**: AI Developer
