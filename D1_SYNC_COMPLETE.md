# ğŸ‰ Cloudflare D1 ì–‘ë°©í–¥ ë™ê¸°í™” ì‹œìŠ¤í…œ ì™„ë£Œ!

## âœ… êµ¬í˜„ ì™„ë£Œëœ ê¸°ëŠ¥

### 1ï¸âƒ£ **ë¡œì»¬ DB â†’ Cloudflare D1 ë‚´ë³´ë‚´ê¸°** (ì‹ ê·œ!)

**URL**: https://superplace-study.vercel.app/dashboard/admin/export-d1

**ê¸°ëŠ¥**:
- ë¡œì»¬ PostgreSQLì˜ ëª¨ë“  ì‚¬ìš©ìë¥¼ Cloudflare D1ë¡œ ë³µì‚¬
- ë²„íŠ¼ í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ìë™ ë‚´ë³´ë‚´ê¸°
- ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© í‘œì‹œ
- ìƒì„±/ì—…ë°ì´íŠ¸/ì‹¤íŒ¨ í†µê³„

**ì‚¬ìš© ë°©ë²•**:
1. ê´€ë¦¬ìë¡œ ë¡œê·¸ì¸ (`admin@superplace.com` / `admin123!@#`)
2. https://superplace-study.vercel.app/dashboard/admin/export-d1 ì ‘ì†
3. "ë¯¸ë¦¬ë³´ê¸° ë¡œë“œ" ë²„íŠ¼ í´ë¦­
4. "Nëª… ë‚´ë³´ë‚´ê¸°" ë²„íŠ¼ í´ë¦­
5. ì™„ë£Œ!

---

### 2ï¸âƒ£ **Cloudflare D1 â†’ ë¡œì»¬ DB ìë™ ë™ê¸°í™”**

**URL**: https://superplace-study.vercel.app/dashboard/admin/users

**ê¸°ëŠ¥**:
- í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ D1ì—ì„œ ì‚¬ìš©ì ê°€ì ¸ì˜¤ê¸°
- ìƒˆ ì‚¬ìš©ì ìë™ ìƒì„±
- ê¸°ì¡´ ì‚¬ìš©ì ì •ë³´ ìë™ ì—…ë°ì´íŠ¸
- "Cloudflare ë™ê¸°í™”" ë²„íŠ¼ìœ¼ë¡œ ìˆ˜ë™ ë™ê¸°í™”

---

### 3ï¸âƒ£ **ì–‘ë°©í–¥ ë™ê¸°í™” ëŒ€ì‹œë³´ë“œ**

**URL**: https://superplace-study.vercel.app/dashboard/sync

**ê¸°ëŠ¥**:
- D1 ì—°ê²° ìƒíƒœ ì‹¤ì‹œê°„ í™•ì¸
- ë¡œì»¬ DB vs D1 í†µê³„ ë¹„êµ
- ë™ê¸°í™” íˆìŠ¤í† ë¦¬ ì¡°íšŒ
- ìˆ˜ë™ ë™ê¸°í™” ì‹¤í–‰

---

## ğŸ”„ ì „ì²´ ë™ê¸°í™” í”Œë¡œìš°

### **ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ì¡´ ì‚¬ìš©ìë¥¼ D1ë¡œ ë‚´ë³´ë‚´ê¸°**

```
ë¡œì»¬ PostgreSQL (100ëª…) â†’ Cloudflare D1 (0ëª…)
```

1. `/dashboard/admin/export-d1` ì ‘ì†
2. "100ëª… ë‚´ë³´ë‚´ê¸°" í´ë¦­
3. D1ì— 100ëª… ë³µì‚¬ ì™„ë£Œ! âœ…

---

### **ì‹œë‚˜ë¦¬ì˜¤ 2: D1ì—ì„œ ìƒˆ íšŒì›ê°€ì… â†’ ìë™ ë™ê¸°í™”**

```
Cloudflare D1 (íšŒì›ê°€ì…) â†’ ë¡œì»¬ PostgreSQL (ìë™)
```

1. ì‚¬ìš©ìê°€ https://superplace-academy.pages.devì—ì„œ íšŒì›ê°€ì…
2. D1ì— ì €ì¥ë¨
3. ê´€ë¦¬ìê°€ `/dashboard/admin/users` ì ‘ì†
4. ìë™ìœ¼ë¡œ ë¡œì»¬ DBì— ë™ê¸°í™”! âœ…

---

## ğŸ“Š ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cloudflare Pages (íšŒì›ê°€ì… í˜ì´ì§€)      â”‚
â”‚   https://superplace-academy.pages.dev  â”‚
â”‚                                          â”‚
â”‚   Cloudflare D1 Database (SQLite)       â”‚
â”‚   - íšŒì›ê°€ì… ì‚¬ìš©ì ì €ì¥                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•ï¸
           [ì–‘ë°©í–¥ ë™ê¸°í™”]
                    â†•ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel (ë©”ì¸ ì„œë¹„ìŠ¤)                   â”‚
â”‚   https://superplace-study.vercel.app   â”‚
â”‚                                          â”‚
â”‚   Neon PostgreSQL                        â”‚
â”‚   - í•™ì› ê´€ë¦¬ ì‹œìŠ¤í…œ                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

### **ë‚´ë³´ë‚´ê¸° (ë¡œì»¬ â†’ D1)**
```
POST /api/export-users-to-d1
GET  /api/export-users-to-d1 (ë¯¸ë¦¬ë³´ê¸°)
```

### **ë™ê¸°í™” (D1 â†’ ë¡œì»¬)**
```
GET  /api/admin/users?sync=true
POST /api/cloudflare/d1/sync?direction=from-d1
```

### **í…ŒìŠ¤íŠ¸**
```
GET /api/test-d1-connection (D1 ì—°ê²° í…ŒìŠ¤íŠ¸)
GET /api/test-sync (ë™ê¸°í™” ì‹œë®¬ë ˆì´ì…˜)
GET /api/debug-env (í™˜ê²½ ë³€ìˆ˜ í™•ì¸)
```

---

## ğŸ” í™˜ê²½ ë³€ìˆ˜ (Vercel)

```env
# í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜
CLOUDFLARE_ACCOUNT_ID=your-account-id
CLOUDFLARE_D1_DATABASE_ID=8c106540-21b4-4fa9-8879-c4956e459ca1
CLOUDFLARE_API_KEY=your-global-api-key
CLOUDFLARE_EMAIL=your-email@example.com

# ì„ íƒ í™˜ê²½ ë³€ìˆ˜
CLOUDFLARE_SITE_URL=https://superplace-academy.pages.dev
```

---

## ğŸ“‹ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### **ì²˜ìŒ ì„¤ì • ì‹œ (í•œ ë²ˆë§Œ)**

1. **D1 í…Œì´ë¸” ìƒì„±**
   - Cloudflare D1 Consoleì—ì„œ User í…Œì´ë¸” ìƒì„±
   - SQL ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (ì™„ë£Œ âœ…)

2. **ê¸°ì¡´ ì‚¬ìš©ì ë‚´ë³´ë‚´ê¸°**
   - `/dashboard/admin/export-d1` ì ‘ì†
   - "ë‚´ë³´ë‚´ê¸°" ë²„íŠ¼ í´ë¦­
   - ë¡œì»¬ DBì˜ ëª¨ë“  ì‚¬ìš©ìê°€ D1ë¡œ ë³µì‚¬ë¨

---

### **ì¼ìƒì ì¸ ì‚¬ìš©**

1. **ìƒˆ íšŒì›ì´ ê°€ì…í•˜ë©´**
   - https://superplace-academy.pages.devì—ì„œ íšŒì›ê°€ì…
   - ìë™ìœ¼ë¡œ D1ì— ì €ì¥

2. **ê´€ë¦¬ìê°€ í™•ì¸**
   - `/dashboard/admin/users` ì ‘ì†
   - ìë™ìœ¼ë¡œ D1ì—ì„œ ìƒˆ íšŒì› ê°€ì ¸ì˜¤ê¸°
   - ëª©ë¡ì— í‘œì‹œë¨

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### **D1 ì—°ê²° ì•ˆ ë¨**
```
https://superplace-study.vercel.app/api/test-d1-connection
```
â†’ D1 ì—°ê²° ìƒíƒœ í™•ì¸

### **í™˜ê²½ ë³€ìˆ˜ í™•ì¸**
```
https://superplace-study.vercel.app/api/debug-env
```
â†’ í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸

### **ë™ê¸°í™” í…ŒìŠ¤íŠ¸**
```
https://superplace-study.vercel.app/api/test-sync
```
â†’ ë™ê¸°í™” ì‹œë®¬ë ˆì´ì…˜ (ì‹¤ì œ ë³€ê²½ ì—†ìŒ)

---

## ğŸ“Š í†µê³„ ë° ë¡œê·¸

### **ë™ê¸°í™” íˆìŠ¤í† ë¦¬**
- `/dashboard/sync` â†’ ìµœê·¼ ë™ê¸°í™” ë¡œê·¸ í™•ì¸
- í™œë™ ë¡œê·¸ì— ìë™ ê¸°ë¡

### **ì‚¬ìš©ì í†µê³„**
- ë¡œì»¬ DB: `/dashboard/admin/users`
- D1: `/dashboard/sync`

---

## ğŸš€ ë°°í¬ ì •ë³´

- **ì»¤ë°‹**: `9f4d1df`
- **GitHub**: https://github.com/kohsunwoo12345-cmyk/superplace
- **í”„ë¡œë•ì…˜**: https://superplace-study.vercel.app
- **Cloudflare Pages**: https://superplace-academy.pages.dev

---

## ğŸŠ ì™„ë£Œ!

ì´ì œ ë‹¤ìŒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤:

1. âœ… ë¡œì»¬ DB â†’ D1 ë‚´ë³´ë‚´ê¸° (ë²„íŠ¼ í•œ ë²ˆ!)
2. âœ… D1 â†’ ë¡œì»¬ DB ìë™ ë™ê¸°í™”
3. âœ… ì–‘ë°©í–¥ ë™ê¸°í™” ëŒ€ì‹œë³´ë“œ
4. âœ… ì‹¤ì‹œê°„ ì—°ê²° ìƒíƒœ í™•ì¸
5. âœ… ë™ê¸°í™” íˆìŠ¤í† ë¦¬ ì¶”ì 

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

### **ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘:**

1. **ê´€ë¦¬ìë¡œ ë¡œê·¸ì¸**
   ```
   https://superplace-study.vercel.app/login
   ì´ë©”ì¼: admin@superplace.com
   ë¹„ë°€ë²ˆí˜¸: admin123!@#
   ```

2. **ê¸°ì¡´ ì‚¬ìš©ì ë‚´ë³´ë‚´ê¸°**
   ```
   https://superplace-study.vercel.app/dashboard/admin/export-d1
   ```

3. **ë™ê¸°í™” í™•ì¸**
   ```
   https://superplace-study.vercel.app/dashboard/sync
   ```

---

**ì‘ì„±ì¼**: 2025-01-30  
**ë²„ì „**: 1.0.0  
**ìƒíƒœ**: í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ âœ…
