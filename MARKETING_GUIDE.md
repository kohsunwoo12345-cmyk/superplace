# AI 쇼핑몰 마케팅 기능 완전 가이드

## 🎯 개요
AI 쇼핑몰에 실제 쇼핑몰에서 사용하는 마케팅 기능들을 추가했습니다.

---

## 💰 1. 할인 시스템

### 정률 할인 (Percentage)
```
원가: 100,000원
할인율: 20%
판매가: 80,000원
```

**설정 방법**:
1. 제품 생성 페이지에서 "마케팅 & 프로모션" 섹션으로 이동
2. 할인 유형: **정률 할인 (%)** 선택
3. 할인율: **20** 입력
4. 원가: **100000** 입력
5. 자동으로 판매가 계산: **80,000원**

### 정액 할인 (Fixed)
```
원가: 100,000원
할인 금액: 30,000원
판매가: 70,000원
```

**설정 방법**:
1. 할인 유형: **정액 할인 (원)** 선택
2. 할인 금액: **30000** 입력
3. 원가: **100000** 입력
4. 자동으로 판매가 계산: **70,000원**

### 미리보기
- ~~원가 100,000원~~ (취소선)
- **판매가 70,000원** (강조)
- 배지: **🎉 30% 할인** (또는 **30,000원 할인**)

---

## 🎉 2. 프로모션 시스템

### 1+1 이벤트
```
예시: AI 수학 튜터 3개월 구매 시 1개월 무료!
```

**설정 방법**:
1. 프로모션 유형: **1+1** 선택
2. 프로모션 설명: "3개월 구매 시 1개월 무료!" 입력
3. 프로모션 시작일: 2026-02-24 선택
4. 프로모션 종료일: 2026-03-10 선택

**미리보기**:
- 배지: **🎁 1+1**
- 프로모션 카드:
  ```
  🎉 3개월 구매 시 1개월 무료!
  기간: 2026-02-24 ~ 2026-03-10
  ```

### 2+1 이벤트
```
예시: 두 개 구매 시 하나 더 드려요!
```

**설정 방법**:
1. 프로모션 유형: **2+1** 선택
2. 프로모션 설명: "두 개 구매 시 하나 더!" 입력

### 사은품 증정
```
예시: AI 영어 튜터 구매 시 학습 자료 무료 제공
```

**설정 방법**:
1. 프로모션 유형: **사은품 증정** 선택
2. 프로모션 설명: "학습 자료 PDF 무료 제공" 입력

### 묶음 할인
```
예시: AI 수학 + AI 영어 함께 구매 시 20% 추가 할인
```

**설정 방법**:
1. 프로모션 유형: **묶음 할인** 선택
2. 프로모션 설명: "수학+영어 세트 20% 추가 할인" 입력

---

## 🏷️ 3. 배지 시스템

### 커스텀 배지
```
NEW, HOT, BEST, 추천, 인기, 한정판, 이달의 상품
```

**설정 방법**:
1. 배지 입력란: "NEW, HOT, BEST" 입력 (쉼표로 구분)
2. 미리보기에 빨간색 배지로 표시

### 타임딜 배지
```
⏰ 타임딜 (시간 제한 특가)
```

**설정 방법**:
1. "타임딜 (⏰ 시간 제한 특가)" 체크박스 선택
2. 프로모션 종료일 설정
3. 미리보기에 주황색 애니메이션 배지 표시

### 자동 배지
- 할인 설정 시 자동 생성: **🎉 20% 할인**
- 프로모션 설정 시 자동 생성: **🎁 1+1**

---

## 📦 4. 재고 & 구매 제한

### 재고 수량
```
-1: 무제한
0: 품절
양수: 재고 수량 (예: 100개)
```

**설정 방법**:
1. 재고 수량: **100** 입력
2. 100개 판매 후 자동 품절 처리 (향후 구현)

### 1인당 구매 제한
```
-1: 무제한
양수: 최대 구매 수량 (예: 5개)
```

**설정 방법**:
1. 1인당 최대 구매 수량: **5** 입력
2. 한 사용자가 5개까지만 구매 가능

**사용 예시**:
- **한정 이벤트**: 재고 50개, 1인당 1개 한정
- **대량 구매 방지**: 1인당 최대 10개
- **무제한 판매**: 재고 -1, 구매 제한 -1

---

## 🎫 5. 쿠폰 시스템 (데이터베이스)

### 쿠폰 테이블 구조
```sql
CREATE TABLE Coupons (
  id TEXT PRIMARY KEY,
  code TEXT UNIQUE NOT NULL,           -- 쿠폰 코드 (예: WELCOME2026)
  name TEXT NOT NULL,                  -- 쿠폰 이름
  discountType TEXT,                   -- percentage, fixed
  discountValue INTEGER,               -- 할인율(%) 또는 할인금액(원)
  maxDiscountAmount INTEGER,           -- 최대 할인 금액
  minPurchaseAmount INTEGER,           -- 최소 구매 금액
  usageLimit INTEGER,                  -- 전체 사용 제한 횟수
  usageLimitPerUser INTEGER,           -- 1인당 사용 제한 횟수
  validFrom TEXT,                      -- 사용 시작일
  validUntil TEXT,                     -- 사용 종료일
  isActive INTEGER                     -- 활성 여부
);
```

### 샘플 쿠폰

#### 신규 회원 환영 쿠폰
```
코드: WELCOME2026
이름: 신규 회원 환영 쿠폰
할인: 10% (최대 50,000원)
최소 구매 금액: 없음
사용 제한: 무제한
1인당 사용: 1회
유효 기간: 30일
```

#### 여름 특가 쿠폰
```
코드: SUMMER50
이름: 여름 특가 쿠폰
할인: 50,000원 즉시 할인
최소 구매 금액: 100,000원
사용 제한: 100회
1인당 사용: 1회
유효 기간: 7일
```

### 쿠폰 사용 흐름
```
1. 사용자가 구매 페이지에서 쿠폰 코드 입력
2. 쿠폰 유효성 검증:
   - 코드 존재 여부
   - 유효 기간 확인
   - 사용 횟수 확인
   - 최소 구매 금액 확인
3. 할인 금액 계산 및 적용
4. CouponUsage 테이블에 사용 내역 저장
5. Coupons 테이블의 usedCount 증가
```

---

## 🎪 6. 프로모션 이벤트 (데이터베이스)

### 프로모션 이벤트 테이블
```sql
CREATE TABLE PromotionEvents (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,                  -- 프로모션 이름
  promotionType TEXT,                  -- discount, 1plus1, 2plus1, gift
  targetProducts TEXT,                 -- JSON array: 대상 제품 목록
  targetCategories TEXT,               -- JSON array: 대상 카테고리
  discountType TEXT,                   -- percentage, fixed
  discountValue INTEGER,               -- 할인율 또는 금액
  priority INTEGER,                    -- 우선순위
  startDate TEXT,                      -- 시작일
  endDate TEXT,                        -- 종료일
  bannerImageUrl TEXT                  -- 배너 이미지
);
```

### 샘플 프로모션

#### AI 수학 튜터 1+1 이벤트
```
이름: AI 수학 튜터 1+1 이벤트
타입: 1plus1
기간: 14일
우선순위: 10
```

#### 깜짝 타임딜 30% 할인
```
이름: 깜짝 타임딜 30% 할인
타입: discount
할인: 30%
기간: 1일 (오늘만!)
우선순위: 20 (최우선)
```

---

## 🚀 배포 및 사용 방법

### 1. 데이터베이스 마이그레이션
```bash
# 로컬 테스트
wrangler d1 execute DB --local --file=schema/marketing-features.sql

# 프로덕션 배포
wrangler d1 execute DB --remote --file=schema/marketing-features.sql
```

### 2. 제품 생성 예시

#### 시나리오 1: 20% 할인 + 타임딜
```
제품명: AI 수학 튜터 프리미엄
원가: 100,000원
할인율: 20%
판매가: 80,000원 (자동 계산)
타임딜: 체크 ✓
배지: NEW, HOT
프로모션 종료일: 2026-02-25 (오늘까지!)
```

**결과**:
- 배지: `NEW` `HOT` `⏰ 타임딜` `🎉 20% 할인`
- ~~100,000원~~ → **80,000원**

#### 시나리오 2: 1+1 이벤트
```
제품명: AI 영어 회화 튜터
학생당 가격: 990원/월
프로모션: 1+1
프로모션 설명: 3개월 구매 시 1개월 무료!
기간: 2026-02-24 ~ 2026-03-10
배지: BEST, 추천
```

**결과**:
- 배지: `BEST` `추천` `🎁 1+1`
- 프로모션 카드 표시
- 학생 50명 × 3개월 구매 시 → 4개월 사용 가능

#### 시나리오 3: 한정 판매
```
제품명: AI 과학 튜터 얼리버드
원가: 150,000원
할인: 50,000원 (정액 할인)
판매가: 100,000원
재고: 50개 한정
1인당 구매 제한: 1개
배지: 한정판, 얼리버드
```

**결과**:
- 배지: `한정판` `얼리버드` `🎉 50,000원 할인`
- ~~150,000원~~ → **100,000원**
- "50개 한정 판매, 1인 1개 한정"

---

## 📊 마케팅 효과 분석

### 추천 조합

#### 신규 제품 론칭
```
✓ 배지: NEW
✓ 할인: 20% (런칭 기념)
✓ 재고: 100개 한정
✓ 기간: 7일
```

#### 재고 소진 이벤트
```
✓ 배지: 한정판, 마지막 기회
✓ 할인: 30% (최종 할인)
✓ 타임딜: 체크 ✓
✓ 재고: 남은 수량 표시
```

#### 고가 상품 판매
```
✓ 프로모션: 1+1 또는 2+1
✓ 쿠폰: 고액 쿠폰 (50,000원)
✓ 배지: BEST, 추천
✓ 할인: 15% (부담 완화)
```

---

## ✅ 체크리스트

### 제품 생성 시
- [ ] 원가 설정 (할인 사용 시 필수)
- [ ] 할인 유형 및 할인율/금액 설정
- [ ] 프로모션 타입 선택 (필요 시)
- [ ] 프로모션 설명 작성
- [ ] 프로모션 기간 설정
- [ ] 배지 입력 (쉼표로 구분)
- [ ] 타임딜 여부 선택
- [ ] 재고 수량 설정
- [ ] 1인당 구매 제한 설정
- [ ] 미리보기에서 확인
- [ ] 저장

### 배포 후
- [ ] 제품 목록에서 배지 표시 확인
- [ ] 할인 가격 정상 표시 확인
- [ ] 프로모션 카드 표시 확인
- [ ] 구매 페이지에서 최종 가격 확인

---

## 🎉 완료!

AI 쇼핑몰에 실제 쇼핑몰 수준의 마케팅 기능이 추가되었습니다!

**주요 기능**:
- ✅ 할인 시스템 (정률/정액)
- ✅ 프로모션 (1+1, 2+1, 사은품, 묶음)
- ✅ 배지 시스템
- ✅ 타임딜
- ✅ 재고 관리
- ✅ 구매 제한
- ✅ 쿠폰 시스템 (DB)
- ✅ 프로모션 이벤트 (DB)

**다음 단계**: 쿠폰 입력 UI 추가 (향후 구현)
